<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Työajanhallintasovellus</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>  
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<script>


    $(function () {

        $("#btnAdd").click(function () {
            $("#workerdialog").dialog();
        })
        
        $("#workers").click(function fetchWorkers() {
            $('#results').html("");
            document.getElementById("frmAddWorker").innerHTML = "Lisää työntekijä";
            $.get("http://localhost:3002/workers").done(function(data, status) {
                $.each(data, function (i , item) {
                    var $tr = $('<tr>').append(
                        $('<td>').text(item.nimi)
                    ).appendTo("#results");
                })
            }) 
        });

        $("#projects").click(function fetchProjects() {
            $('#results').html("");
            document.getElementById("add").innerHTML = "Lisää projekti";
            $.get("http://localhost:3002/projects").done(function(data, status) {
                $.each(data, function (i , item) {
                    var $tr = $('<tr>').append(
                        $('<td>').text(item.nimi)
                    ).appendTo("#results");
                })
            }) 
        });

    });
</script>


<body>
    <?php
    session_start();

    ?>




    <div class="topnav" style="padding-top:300px">
        <a href="#etusivu">Etusivu</a>
        <a href="#projektit" id="projects">Projektit</a>
        <a href="#workers" id="workers">Työntekijät</a>
        <a href="#ajat">Testailua</a>
    </div>

    <div class="main" id="main">
        <h2>Tähän tulee jotain sisältöä...</h2>
        <p>...elikkäst taulukko jotenkin hienosti bootstrapilla sipisteltynä.</p>
        
        <table id="results"></table>

        <br>
        
        <button id="btnAdd" type="button" class="btn btn-info">Lisää</button>
    </div>

    <div id="workerdialog" title="Lisää työntekijä" style="display: none">
    <p>Lisää uusi työntekijä</p>
    <form id="frmAddWorker">
        Nimi <br> <input type="text" name="nimi"><br>
        <input type="submit" value="Lisää" id="dlgAdd" class="btn btn-info">
    </form>
    </div>

</body>

</html>